var S=Object.defineProperty;var $=(o,e,t)=>e in o?S(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var l=(o,e,t)=>$(o,typeof e!="symbol"?e+"":e,t);class C{constructor(e){l(this,"handler");l(this,"isAttached",!1);l(this,"boundHandlers",new Map);this.handler=e}attach(){if(this.isAttached)return;const e=["click","dblclick","input","change","keydown","scroll"];for(const t of e){const s=this.createHandler(t);this.boundHandlers.set(t,s),document.addEventListener(t,s,{capture:!0,passive:!0})}this.isAttached=!0}detach(){if(this.isAttached){for(const[e,t]of this.boundHandlers)document.removeEventListener(e,t,{capture:!0});this.boundHandlers.clear(),this.isAttached=!1}}createHandler(e){return t=>{const s=this.captureEvent(e,t);s&&this.handler(s)}}captureEvent(e,t){const s=t.target;if(!s||!(s instanceof Element)||s.closest("[data-qaerx-extension]"))return null;const i={timestamp:Date.now(),target:s,frameSelector:this.getFrameSelector(s)};switch(e){case"click":case"dblclick":{const n=t;return{...i,type:e,target:s,timestamp:i.timestamp,button:this.getMouseButton(n.button)}}case"input":{const n=s;return"value"in n?{...i,type:"input",target:s,timestamp:i.timestamp,value:n.value}:null}case"change":{const n=s;return n.tagName==="SELECT"?{...i,type:"change",target:s,timestamp:i.timestamp,value:n.value}:n.type==="checkbox"||n.type==="radio"?{...i,type:"change",target:s,timestamp:i.timestamp,checked:n.checked}:null}case"keydown":{const n=t;return this.isSpecialKey(n.key)?{...i,type:"keydown",target:s,timestamp:i.timestamp,key:n.key,modifiers:this.getModifiers(n)}:null}case"scroll":return{...i,type:"scroll",target:s,timestamp:i.timestamp,scrollX:window.scrollX,scrollY:window.scrollY};default:return null}}getMouseButton(e){switch(e){case 0:return"left";case 1:return"middle";case 2:return"right";default:return"left"}}isSpecialKey(e){return["Enter","Tab","Escape","Backspace","Delete","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"].includes(e)}getModifiers(e){const t=[];return e.ctrlKey&&t.push("Ctrl"),e.shiftKey&&t.push("Shift"),e.altKey&&t.push("Alt"),e.metaKey&&t.push("Meta"),t}getFrameSelector(e){const t=e.ownerDocument.defaultView;if(t===window)return;const s=document.querySelectorAll("iframe");for(const i of s)if(i.contentWindow===t){const n=i.id?`#${i.id}`:"",r=i.name?`[name="${i.name}"]`:"";return n?`iframe${n}`:r?`iframe${r}`:`iframe[src="${i.src}"]`}}}class E{generate(e){const t=[];let s=0;const i=e.getAttribute("data-testid");i&&t.push({type:"data-testid",value:`[data-testid="${i}"]`,priority:s++,confidence:.95});const n=e.getAttribute("data-cy");n&&t.push({type:"data-cy",value:`[data-cy="${n}"]`,priority:s++,confidence:.95});const r=e.getAttribute("aria-label");r&&t.push({type:"aria",value:`[aria-label="${r}"]`,priority:s++,confidence:.85});const c=e.getAttribute("role");c&&e.id&&this.isStableId(e.id)&&t.push({type:"aria",value:`[role="${c}"]#${e.id}`,priority:s++,confidence:.8}),e.id&&this.isStableId(e.id)&&t.push({type:"css",value:`#${CSS.escape(e.id)}`,priority:s++,confidence:.95});const a=e.getAttribute("name");a&&this.isStableName(a)&&t.push({type:"css",value:`[name="${CSS.escape(a)}"]`,priority:s++,confidence:.9});const u=e.getAttribute("type");u&&a&&this.isStableName(a)&&t.push({type:"css",value:`input[type="${u}"][name="${CSS.escape(a)}"]`,priority:s++,confidence:.92});const d=e.getAttribute("placeholder");d&&d.length<50&&t.push({type:"css",value:`[placeholder="${CSS.escape(d)}"]`,priority:s++,confidence:.75});const h=this.generateSemanticCSS(e);h&&t.push({type:"css",value:h,priority:s++,confidence:.7});const b=this.getUniqueTextContent(e);b&&t.push({type:"text",value:b,priority:s++,confidence:.5});const k=this.generateFullCSSPath(e);return t.push({type:"css",value:k,priority:s++,confidence:.4}),t}isStableId(e){return![/^[a-f0-9]{8}-[a-f0-9]{4}/i,/^:r[0-9]+:/,/^ember\d+$/,/^ng-\d+$/,/^\d+$/,/^[a-z]+_[a-f0-9]{6,}$/i,/^mui-\d+$/,/^headlessui-/].some(s=>s.test(e))}isStableName(e){const t=[/^[a-f0-9]{8,}$/i,/^\d+$/];return e.length>0&&!t.some(s=>s.test(e))}generateSemanticCSS(e){const t=e.tagName.toLowerCase(),s=Array.from(e.classList).filter(r=>this.isSemanticClass(r)).slice(0,2);if(s.length===0)return null;const i=`${t}.${s.join(".")}`;if(document.querySelectorAll(i).length===1)return i;const n=e.parentElement;if(n&&n.tagName!=="BODY"){const r=n.tagName.toLowerCase(),c=Array.from(n.classList).filter(a=>this.isSemanticClass(a)).slice(0,1);if(c.length>0){const a=`${r}.${c[0]} > ${i}`;if(document.querySelectorAll(a).length===1)return a}}return null}isSemanticClass(e){const t=[/^[a-z]{1,2}-\d+$/,/^[a-f0-9]{6,}$/i,/^css-[a-z0-9]+$/i,/^sc-[a-zA-Z]+$/,/^emotion-[0-9]+$/,/^_[a-zA-Z0-9]+$/,/^[a-z]+__[a-z]+--/];return e.length>2&&!t.some(s=>s.test(e))}generateFullCSSPath(e){const t=[];let s=e;for(;s&&s.tagName!=="HTML";){let i=s.tagName.toLowerCase();if(s.id&&this.isStableId(s.id)){i=`#${CSS.escape(s.id)}`,t.unshift(i);break}const n=s.parentElement;if(n){const r=s.tagName,c=n.children,a=[];for(let u=0;u<c.length;u++)c[u].tagName===r&&a.push(c[u]);if(a.length>1){const u=a.indexOf(s)+1;i+=`:nth-of-type(${u})`}t.unshift(i),s=n}else{t.unshift(i);break}}return t.join(" > ")}getUniqueTextContent(e){var i;if(!["BUTTON","A","LABEL","H1","H2","H3","H4","H5","H6"].includes(e.tagName))return null;const s=(i=e.textContent)==null?void 0:i.trim();return!s||s.length<2||s.length>50?null:s}getElementDescription(e){if(e.type==="text")return`"${e.value.substring(0,20)}${e.value.length>20?"...":""}"`;if(e.type==="data-testid"||e.type==="data-cy"){const t=e.value.match(/\[data-(?:testid|cy)="([^"]+)"\]/);return t?t[1]:e.value}if(e.type==="aria"){const t=e.value.match(/\[aria-label="([^"]+)"\]/);return t?t[1]:e.value}return e.type==="css"&&e.value.startsWith("#")?e.value.substring(1):e.value.split(" > ").pop()||e.value}}class T{constructor(){l(this,"SCROLL_DEBOUNCE_MS",300)}filter(e){let t=e;return t=this.dedupeScrolls(t),t=this.collapseInputs(t),t=t.filter(s=>s.type!=="focus"&&s.type!=="blur"),t=t.filter(s=>!this.isExtensionElement(s.target)),t}dedupeScrolls(e){const t=[];let s=null,i=0;for(const n of e)n.type==="scroll"?(s&&n.timestamp-i<this.SCROLL_DEBOUNCE_MS?t[t.length-1]=n:t.push(n),s=n,i=n.timestamp):(t.push(n),s=null);return t}collapseInputs(e){const t=[];let s=[],i=null;const n=()=>{if(s.length>0){const r=s[s.length-1];t.push(r),s=[]}};for(const r of e)r.type==="input"?(i!==r.target&&(n(),i=r.target),s.push(r)):(n(),i=null,t.push(r));return n(),t}isExtensionElement(e){return e.closest("[data-qaerx-extension]")!==null}}const B=()=>crypto.randomUUID();function A(o,e){let t;return(...s)=>{clearTimeout(t),t=setTimeout(()=>o(...s),e)}}class L{constructor(){l(this,"session",null);l(this,"eventCapture");l(this,"selectorGenerator");l(this,"actionFilter");l(this,"debouncedProcessEvents");this.eventCapture=new C(this.handleEvent.bind(this)),this.selectorGenerator=new E,this.actionFilter=new T,this.debouncedProcessEvents=A(()=>this.processPendingEvents(),100)}start(e){if(this.session)throw new Error("Recording already in progress");this.session={id:e,startedAt:Date.now(),isPaused:!1,steps:[],pendingEvents:[]},this.eventCapture.attach(),this.sendToBackground({type:"recording:started",sessionId:e})}pause(){this.session&&(this.session.isPaused=!0,this.sendToBackground({type:"recording:paused"}))}resume(){this.session&&(this.session.isPaused=!1,this.sendToBackground({type:"recording:resumed"}))}stop(){if(!this.session)return[];this.eventCapture.detach(),this.processPendingEvents();const e=this.session.steps,t=this.session.id;return this.session=null,this.sendToBackground({type:"recording:stopped",sessionId:t,steps:e}),e}getSteps(){var e;return((e=this.session)==null?void 0:e.steps)||[]}isRecording(){return this.session!==null&&!this.session.isPaused}handleEvent(e){!this.session||this.session.isPaused||(this.session.pendingEvents.push(e),this.debouncedProcessEvents())}processPendingEvents(){if(!this.session||this.session.pendingEvents.length===0)return;const e=this.session.pendingEvents;this.session.pendingEvents=[];const t=this.actionFilter.filter(e);for(const s of t){const i=this.createStep(s);i&&(this.session.steps.push(i),this.sendToBackground({type:"recording:step-added",step:i}))}}createStep(e){const t=this.selectorGenerator.generate(e.target);if(t.length===0)return console.warn("Could not generate selectors for element:",e.target),null;const s=this.mapEventToAction(e);return s?{id:B(),type:"ui",order:this.session.steps.length,name:this.generateStepName(s,t[0]),enabled:!0,continueOnFailure:!1,action:s,selectors:e.frameSelector?t.map(n=>({...n,frameSelector:e.frameSelector})):t}:null}mapEventToAction(e){switch(e.type){case"click":return{type:"click",button:e.button};case"dblclick":return{type:"dblclick"};case"input":return{type:"type",text:e.value||""};case"change":return e.target.tagName==="SELECT"?{type:"select",value:e.value||""}:e.target instanceof HTMLInputElement&&(e.target.type==="checkbox"||e.target.type==="radio")?e.checked?{type:"check"}:{type:"uncheck"}:null;case"scroll":return{type:"scroll",x:e.scrollX,y:e.scrollY};case"keydown":return e.key?{type:"press",key:e.key,modifiers:e.modifiers}:null;default:return null}}generateStepName(e,t){var i;const s=this.selectorGenerator.getElementDescription(t);switch(e.type){case"click":return`Click ${s}`;case"dblclick":return`Double-click ${s}`;case"type":return`Type "${e.text.length>20?e.text.substring(0,20)+"...":e.text}" into ${s}`;case"select":return`Select "${e.value}" in ${s}`;case"check":return`Check ${s}`;case"uncheck":return`Uncheck ${s}`;case"scroll":return"Scroll page";case"press":const r=((i=e.modifiers)==null?void 0:i.join("+"))||"";return`Press ${r?r+"+":""}${e.key}`;default:return`${e.type} on ${s}`}}sendToBackground(e){try{chrome.runtime.sendMessage(e)}catch(t){console.error("Failed to send message to background:",t)}}}let f=null;function I(){return f||(f=new L),f}const F=3e4;class P{constructor(){l(this,"shouldStop",!1)}async execute(e,t={}){const{timeout:s=F,variables:i={},onStepStart:n,onStepComplete:r}=t;this.shouldStop=!1;const c={status:"passed",startedAt:Date.now(),completedAt:0,stepResults:[]};for(let a=0;a<e.length&&!this.shouldStop;a++){const u=e[a];if(!u.enabled){c.stepResults.push({stepId:u.id,status:"skipped",duration:0});continue}n==null||n(u,a);const d=Date.now(),h=await this.executeStep(u,s,i);if(h.duration=Date.now()-d,c.stepResults.push(h),r==null||r(u,h),h.status==="failed"&&!u.continueOnFailure){c.status="failed";break}}return c.completedAt=Date.now(),c}stop(){this.shouldStop=!0}async executeStep(e,t,s){try{const i=this.substituteVariables(e.action,s);switch(i.type){case"navigate":await this.navigate(i.url,t);break;case"click":await this.click(e.selectors,t);break;case"dblclick":await this.dblclick(e.selectors,t);break;case"type":await this.type(e.selectors,i.text,t);break;case"select":await this.select(e.selectors,i.value,t);break;case"check":await this.check(e.selectors,!0,t);break;case"uncheck":await this.check(e.selectors,!1,t);break;case"waitForElement":await this.waitForElement(e.selectors,t);break;case"waitTime":await this.waitTime(i.duration);break;case"scroll":await this.scroll(i.x||0,i.y||0);break;default:throw new Error(`Unknown action type: ${i.type}`)}return{stepId:e.id,status:"passed",duration:0}}catch(i){return{stepId:e.id,status:"failed",duration:0,error:i instanceof Error?i.message:String(i)}}}substituteVariables(e,t){const s=n=>n.replace(/\{\{(\w+)\}\}/g,(r,c)=>t[c]??`{{${c}}}`),i={...e};return"url"in i&&typeof i.url=="string"&&(i.url=s(i.url)),"text"in i&&typeof i.text=="string"&&(i.text=s(i.text)),"value"in i&&typeof i.value=="string"&&(i.value=s(i.value)),i}async navigate(e,t){window.location.href=e,await this.waitForLoad(t)}async waitForLoad(e){return new Promise((t,s)=>{const i=setTimeout(()=>s(new Error("Page load timeout")),e);if(document.readyState==="complete"){clearTimeout(i),t();return}window.addEventListener("load",()=>{clearTimeout(i),t()},{once:!0})})}async findElement(e,t){const s=Date.now();for(;Date.now()-s<t;){for(const i of e)try{let n=null;switch(i.type){case"css":case"data-testid":case"data-cy":case"aria":n=document.querySelector(i.value);break;case"xpath":n=document.evaluate(i.value,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;break;case"text":n=this.findByText(i.value);break}if(n&&this.isElementVisible(n))return n}catch{}await this.sleep(100)}throw new Error(`Element not found with selectors: ${e.map(i=>i.value).join(", ")}`)}findByText(e){var i;const t=document.createTreeWalker(document.body,NodeFilter.SHOW_ELEMENT);let s;for(;s=t.nextNode();){const n=s;if(((i=n.textContent)==null?void 0:i.trim())===e)return n}return null}isElementVisible(e){const t=e.getBoundingClientRect(),s=window.getComputedStyle(e);return t.width>0&&t.height>0&&s.visibility!=="hidden"&&s.display!=="none"&&s.opacity!=="0"}async click(e,t){const s=await this.findElement(e,t);this.scrollIntoView(s),s.click()}async dblclick(e,t){const s=await this.findElement(e,t);this.scrollIntoView(s),s.dispatchEvent(new MouseEvent("dblclick",{bubbles:!0}))}async type(e,t,s){const i=await this.findElement(e,s);if(this.scrollIntoView(i),i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement){i.focus(),i.value="";for(const n of t)i.value+=n,i.dispatchEvent(new Event("input",{bubbles:!0})),await this.sleep(10);i.dispatchEvent(new Event("change",{bubbles:!0}))}else throw new Error("Element is not an input or textarea")}async select(e,t,s){const i=await this.findElement(e,s);if(i instanceof HTMLSelectElement)i.value=t,i.dispatchEvent(new Event("change",{bubbles:!0}));else throw new Error("Element is not a select")}async check(e,t,s){const i=await this.findElement(e,s);if(i instanceof HTMLInputElement&&(i.type==="checkbox"||i.type==="radio"))i.checked!==t&&i.click();else throw new Error("Element is not a checkbox or radio")}async waitForElement(e,t){await this.findElement(e,t)}async waitTime(e){await this.sleep(e)}async scroll(e,t){window.scrollTo(e,t)}scrollIntoView(e){e.scrollIntoView({behavior:"smooth",block:"center"})}sleep(e){return new Promise(t=>setTimeout(t,e))}}let g=null;function D(){return g||(g=new P),g}class M{constructor(){l(this,"isActive",!1);l(this,"overlay",null);l(this,"highlightBox",null);l(this,"tooltip",null);l(this,"currentElement",null);l(this,"selectorGenerator",new E);l(this,"onElementSelected");l(this,"handleMouseMove",e=>{var s;const t=document.elementFromPoint(e.clientX,e.clientY);!t||(s=t.id)!=null&&s.startsWith("qaerx-picker")||(this.currentElement=t,this.highlightElement(t,e.clientX,e.clientY))});l(this,"handleClick",e=>{var i;if(e.preventDefault(),e.stopPropagation(),!this.currentElement||(i=e.target.id)!=null&&i.startsWith("qaerx-picker"))return;const s=this.selectorGenerator.generate(this.currentElement);this.stop(),this.onElementSelected&&this.onElementSelected(s)});l(this,"handleKeyDown",e=>{e.key==="Escape"&&this.stop()})}start(e){this.isActive||(this.isActive=!0,this.onElementSelected=e,this.createUI(),this.attachListeners(),document.body.style.cursor="crosshair")}stop(){this.isActive&&(this.isActive=!1,this.removeUI(),this.detachListeners(),document.body.style.cursor="")}createUI(){this.overlay=document.createElement("div"),this.overlay.id="qaerx-picker-overlay",this.overlay.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 999998;
      pointer-events: none;
    `,document.body.appendChild(this.overlay),this.highlightBox=document.createElement("div"),this.highlightBox.style.cssText=`
      position: absolute;
      pointer-events: none;
      border: 2px solid #10b981;
      background: rgba(16, 185, 129, 0.1);
      border-radius: 4px;
      transition: all 0.1s ease;
      z-index: 999999;
    `,document.body.appendChild(this.highlightBox),this.tooltip=document.createElement("div"),this.tooltip.style.cssText=`
      position: absolute;
      pointer-events: none;
      background: #1f2937;
      color: #f9fafb;
      padding: 8px 12px;
      border-radius: 6px;
      font-family: ui-monospace, monospace;
      font-size: 12px;
      white-space: nowrap;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
      z-index: 1000000;
      max-width: 400px;
      overflow: hidden;
      text-overflow: ellipsis;
    `,document.body.appendChild(this.tooltip);const e=document.createElement("div");e.style.cssText=`
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #1f2937;
      color: #f9fafb;
      padding: 12px 20px;
      border-radius: 8px;
      font-family: system-ui, -apple-system, sans-serif;
      font-size: 14px;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
      z-index: 1000001;
      display: flex;
      align-items: center;
      gap: 12px;
    `,e.innerHTML=`
      <span>ðŸŽ¯ Click on any element to select it</span>
      <button style="
        background: #ef4444;
        color: white;
        border: none;
        padding: 4px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
      " id="qaerx-picker-cancel">Cancel (ESC)</button>
    `,document.body.appendChild(e);const t=e.querySelector("#qaerx-picker-cancel");t&&t.addEventListener("click",()=>this.stop()),this.overlay.dataset.banner="true",this.overlay.appendChild(e)}removeUI(){this.overlay&&(this.overlay.remove(),this.overlay=null),this.highlightBox&&(this.highlightBox.remove(),this.highlightBox=null),this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}attachListeners(){document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("click",this.handleClick,!0),document.addEventListener("keydown",this.handleKeyDown)}detachListeners(){document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("click",this.handleClick,!0),document.removeEventListener("keydown",this.handleKeyDown)}highlightElement(e,t,s){if(!this.highlightBox||!this.tooltip)return;const i=e.getBoundingClientRect(),n=window.scrollX||window.pageXOffset,r=window.scrollY||window.pageYOffset;this.highlightBox.style.top=`${i.top+r}px`,this.highlightBox.style.left=`${i.left+n}px`,this.highlightBox.style.width=`${i.width}px`,this.highlightBox.style.height=`${i.height}px`;const a=this.selectorGenerator.generate(e)[0],u=this.formatSelectorForDisplay(a),d=t+15,h=s+15;this.tooltip.textContent=u,this.tooltip.style.left=`${d}px`,this.tooltip.style.top=`${h}px`}formatSelectorForDisplay(e){var r,c,a;const t=((r=this.currentElement)==null?void 0:r.tagName.toLowerCase())||"",s=((c=this.currentElement)==null?void 0:c.getAttribute("type"))||"",i=((a=this.currentElement)==null?void 0:a.getAttribute("name"))||"";let n=`${t}`;return s&&(n+=`[type="${s}"]`),i&&(n+=` (name="${i}")`),`${n} â†’ ${e.value}`}}let m=null;function H(){return m||(m=new M),m}class N{constructor(){l(this,"highlightBox",null)}highlight(e){this.clear();try{const t=document.querySelector(e);if(!t)return;this.createHighlightBox(t)}catch{}}clear(){this.highlightBox&&(this.highlightBox.remove(),this.highlightBox=null)}createHighlightBox(e){const t=e.getBoundingClientRect(),s=window.scrollX||window.pageXOffset,i=window.scrollY||window.pageYOffset;if(this.highlightBox=document.createElement("div"),this.highlightBox.id="qaerx-highlight-box",this.highlightBox.style.cssText=`
      position: absolute;
      top: ${t.top+i}px;
      left: ${t.left+s}px;
      width: ${t.width}px;
      height: ${t.height}px;
      pointer-events: none;
      border: 2px solid #3b82f6;
      background: rgba(59, 130, 246, 0.1);
      border-radius: 4px;
      z-index: 999999;
      animation: qaerx-pulse 2s ease-in-out infinite;
    `,!document.getElementById("qaerx-highlight-styles")){const n=document.createElement("style");n.id="qaerx-highlight-styles",n.textContent=`
        @keyframes qaerx-pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `,document.head.appendChild(n)}document.body.appendChild(this.highlightBox),e.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>this.clear(),3e3)}}let y=null;function q(){return y||(y=new N),y}const p=I(),w=D(),x=H(),v=q();chrome.runtime.onMessage.addListener((o,e,t)=>{var s;switch(o.type){case"ping":return t({success:!0,loaded:!0}),!1;case"recording:start":return p.start(o.sessionId),t({success:!0}),!1;case"recording:stop":const i=p.stop();return t({success:!0,steps:i}),!1;case"recording:pause":return p.pause(),t({success:!0}),!1;case"recording:resume":return p.resume(),t({success:!0}),!1;case"recording:status":return t({isRecording:p.isRecording(),steps:p.getSteps()}),!1;case"playback:execute":return w.execute(o.steps,{timeout:o.timeout||3e4,variables:o.variables||{},onStepStart:(n,r)=>{chrome.runtime.sendMessage({type:"playback:step-start",stepId:n.id,index:r}).catch(()=>{})},onStepComplete:(n,r)=>{chrome.runtime.sendMessage({type:"playback:step-complete",stepId:n.id,result:r}).catch(()=>{})}}).then(n=>{t({success:!0,result:n})}).catch(n=>{t({success:!1,error:String(n)})}),!0;case"playback:stop":return w.stop(),t({success:!0}),!1;case"picker:start":return x.start(n=>{chrome.runtime.sendMessage({type:"picker:element-selected",selectors:n}).catch(()=>{})}),t({success:!0}),!1;case"picker:stop":return x.stop(),t({success:!0}),!1;case"selector:validate":try{const n=document.querySelectorAll(o.selector);t({success:!0,isValid:n.length>0,count:n.length,element:n.length===1?{tag:n[0].tagName.toLowerCase(),text:(s=n[0].textContent)==null?void 0:s.trim().substring(0,50)}:null})}catch(n){t({success:!1,isValid:!1,count:0,error:String(n)})}return!1;case"element:highlight":return v.highlight(o.selector),t({success:!0}),!1;case"element:clear-highlight":return v.clear(),t({success:!0}),!1;default:return t({error:"Unknown message type"}),!1}});chrome.runtime.sendMessage({type:"content-script:ready"}).catch(()=>{});console.log("[QAerx] Content script initialized");
